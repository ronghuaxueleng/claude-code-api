# =============================================================================
# Claude Code API Gateway - 环境变量配置示例
# =============================================================================
# 复制此文件为 .env 并填入实际配置值
# =============================================================================

# =============================================================================
# 服务器配置
# =============================================================================
HOST=0.0.0.0
PORT=8091
DEBUG=false
LOG_LEVEL=INFO
LOG_FORMAT=console

# =============================================================================
# Claude Code CLI 配置
# =============================================================================
# Claude CLI 二进制文件路径
CLAUDE_BINARY_PATH=/usr/local/bin/claude

# 注意：应用启动时会自动检测并移除 Claude CLI 的 root 用户限制
# 这使得在 Docker 容器中以 root 用户运行时可以使用 --dangerously-skip-permissions
# 原始文件会自动备份为 cli.js.original
# 详细说明请查看：README-Claude-Patcher.md

# =============================================================================
# Anthropic API 配置
# =============================================================================
# 官方 Anthropic API
# ANTHROPIC_BASE_URL=https://api.anthropic.com
# ANTHROPIC_API_KEY=your-anthropic-api-key-here

# Moonshot (月之暗面) - 中国提供商
# ANTHROPIC_BASE_URL=https://api.moonshot.cn/anthropic/
# ANTHROPIC_API_KEY=your-moonshot-api-key-here

# BigModel - 中国提供商
# ANTHROPIC_BASE_URL=https://open.bigmodel.cn/api/anthropic
# ANTHROPIC_API_KEY=your-bigmodel-api-key-here

# DeepSeek - 中国提供商
# ANTHROPIC_BASE_URL=https://api.deepseek.com/anthropic
# ANTHROPIC_API_KEY=your-deepseek-api-key-here

# Siliconflow - 中国提供商
# ANTHROPIC_BASE_URL=https://api.siliconflow.cn/
# ANTHROPIC_API_KEY=your-siliconflow-api-key-here

# 认证令牌（某些提供商可能需要）
ANTHROPIC_AUTH_TOKEN=

# 默认模型
ANTHROPIC_MODEL=claude-3-5-haiku-20241022

# =============================================================================
# 数据库配置
# =============================================================================
# SQLite 数据库路径
DATABASE_URL=sqlite:///./claude_api.db

# =============================================================================
# 认证和安全配置
# =============================================================================
# 是否启用 API 密钥认证
REQUIRE_AUTH=false

# API 密钥列表（逗号分隔，当 REQUIRE_AUTH=true 时生效）
# API_KEYS=key1,key2,key3

# CORS 配置（允许的源，逗号分隔）
ALLOWED_ORIGINS=*

# =============================================================================
# 项目和会话配置
# =============================================================================
# 项目文件存储根目录
PROJECT_ROOT=/app/projects

# 最大并发会话数
MAX_CONCURRENT_SESSIONS=10

# 会话超时时间（秒）
SESSION_TIMEOUT=3600

# =============================================================================
# Claude Code 高级配置
# =============================================================================
# 是否启用部分消息支持
ENABLE_PARTIAL_MESSAGES=true

# 流式传输模式：character, word, sentence, message
DEFAULT_STREAMING_MODE=message

# 流式传输延迟（秒）
DEFAULT_STREAMING_DELAY=0.02

# =============================================================================
# 注意事项
# =============================================================================
# 1. ANTHROPIC_API_KEY 是必需的配置项
# 2. 不同的提供商需要配置对应的 ANTHROPIC_BASE_URL
# 3. 生产环境建议启用 REQUIRE_AUTH 并设置强 API 密钥
# 4. 确保 .env 文件不要提交到版本控制（已在 .gitignore 中配置）
# =============================================================================
